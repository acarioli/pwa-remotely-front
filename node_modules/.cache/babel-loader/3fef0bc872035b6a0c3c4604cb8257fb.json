{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Aldana/Desktop/proyectoReact/remotely-pwa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Aldana/Desktop/proyectoReact/remotely-pwa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Aldana/Desktop/proyectoReact/remotely-pwa/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Table,Button}from\"react-bootstrap\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";import Swal from\"sweetalert2\";import\"../css/Subscriptions.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Subscriptions=function Subscriptions(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),subscriptions=_useState2[0],setSubscriptions=_useState2[1];var URL=\"https://remotely-pwa.herokuapp.com/\";var getSubscriptions=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(URL);case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setSubscriptions(data.user);console.log(data.user);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function getSubscriptions(){return _ref.apply(this,arguments);};}();useEffect(function(){getSubscriptions();},[]);var handleDelete=function handleDelete(id){console.log(id);Swal.fire({title:\"Are you sure you want to delete this subscriptor?\",showDenyButton:true,confirmButtonText:\"Delete\",denyButtonText:\"Exit\"}).then(function(result){/* Read more about isConfirmed, isDenied below */if(result.isConfirmed){axios.delete(\"\".concat(URL).concat(id));Swal.fire(\"Deleted\",\"\",\"success\");getSubscriptions();}else if(result.isDenied){Swal.fire(\"This subscriptor has not been deleted\");}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"m-4\",children:\"Subscriptors\"}),/*#__PURE__*/_jsxs(Table,{className:\"container m-2 table striped bordered hover\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"container text-left m-5\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"Actions\"})]})}),subscriptions.map(function(subscription){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"body\",children:[/*#__PURE__*/_jsx(\"td\",{children:subscription.email}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){return handleDelete(subscription._id);},className:\"m-1\",children:\"Delete\"})})]})});})]})]});};export default Subscriptions;","map":{"version":3,"names":["Table","Button","axios","React","useState","useEffect","Swal","Subscriptions","subscriptions","setSubscriptions","URL","getSubscriptions","get","data","user","console","log","error","handleDelete","id","fire","title","showDenyButton","confirmButtonText","denyButtonText","then","result","isConfirmed","delete","isDenied","map","subscription","email","_id"],"sources":["C:/Users/Aldana/Desktop/proyectoReact/remotely-pwa/front/src/components/Subscriptions.jsx"],"sourcesContent":["import { Table, Button } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"../css/Subscriptions.css\";\r\n\r\nconst Subscriptions = () => {\r\n  const [subscriptions, setSubscriptions] = useState([]);\r\n\r\n  const URL = \"https://remotely-pwa.herokuapp.com/\";\r\n\r\n  const getSubscriptions = async () => {\r\n    try {\r\n      const { data } = await axios.get(URL);\r\n      setSubscriptions(data.user);\r\n      console.log(data.user);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getSubscriptions()\r\n  }, [])\r\n\r\n\r\n  const handleDelete = (id) => {\r\n    console.log(id);\r\n\r\n    Swal.fire({\r\n      title: \"Are you sure you want to delete this subscriptor?\",\r\n      showDenyButton: true,\r\n      confirmButtonText: \"Delete\",\r\n      denyButtonText: `Exit`,\r\n    }).then((result) => {\r\n      /* Read more about isConfirmed, isDenied below */\r\n      if (result.isConfirmed) {\r\n        axios.delete(`${URL}${id}`);\r\n        Swal.fire(\"Deleted\", \"\", \"success\");\r\n        getSubscriptions();\r\n      } else if (result.isDenied) {\r\n        Swal.fire(\"This subscriptor has not been deleted\");\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2 className=\"m-4\">Subscriptors</h2>\r\n      <Table className=\"container m-2 table striped bordered hover\">\r\n        <thead className=\"container text-left m-5\">\r\n          <tr>\r\n            <th>Email</th>\r\n            <th className=\"text-center\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        {subscriptions.map((subscription) => (\r\n          <tbody>\r\n            <tr className=\"body\">\r\n              <td>{subscription.email}</td>\r\n              <td className=\"text-center\">\r\n                <Button\r\n                  variant=\"danger\"\r\n                  onClick={() => handleDelete(subscription._id)}\r\n                  className=\"m-1\"\r\n                >\r\n                  Delete\r\n                </Button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        ))}\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Subscriptions;"],"mappings":"0bAAA,OAASA,KAAK,CAAEC,MAAM,KAAQ,iBAAiB,CAC/C,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,KAAI,KAAM,aAAa,CAC9B,MAAO,0BAA0B,CAAC,wFAElC,GAAMC,cAAa,CAAG,QAAhBA,cAAa,EAAS,CAC1B,cAA0CH,QAAQ,CAAC,EAAE,CAAC,wCAA/CI,aAAa,eAAEC,gBAAgB,eAEtC,GAAMC,IAAG,CAAG,qCAAqC,CAEjD,GAAMC,iBAAgB,4FAAG,qMAEET,MAAK,CAACU,GAAG,CAACF,GAAG,CAAC,uCAA7BG,IAAI,kBAAJA,IAAI,CACZJ,gBAAgB,CAACI,IAAI,CAACC,IAAI,CAAC,CAC3BC,OAAO,CAACC,GAAG,CAACH,IAAI,CAACC,IAAI,CAAC,CAAC,+EAEvBC,OAAO,CAACE,KAAK,aAAO,CAAC,oEAExB,kBARKN,iBAAgB,0CAQrB,CAEDN,SAAS,CAAC,UAAM,CACdM,gBAAgB,EAAE,CACpB,CAAC,CAAE,EAAE,CAAC,CAGN,GAAMO,aAAY,CAAG,QAAfA,aAAY,CAAIC,EAAE,CAAK,CAC3BJ,OAAO,CAACC,GAAG,CAACG,EAAE,CAAC,CAEfb,IAAI,CAACc,IAAI,CAAC,CACRC,KAAK,CAAE,mDAAmD,CAC1DC,cAAc,CAAE,IAAI,CACpBC,iBAAiB,CAAE,QAAQ,CAC3BC,cAAc,OAChB,CAAC,CAAC,CAACC,IAAI,CAAC,SAACC,MAAM,CAAK,CAClB,iDACA,GAAIA,MAAM,CAACC,WAAW,CAAE,CACtBzB,KAAK,CAAC0B,MAAM,WAAIlB,GAAG,SAAGS,EAAE,EAAG,CAC3Bb,IAAI,CAACc,IAAI,CAAC,SAAS,CAAE,EAAE,CAAE,SAAS,CAAC,CACnCT,gBAAgB,EAAE,CACpB,CAAC,IAAM,IAAIe,MAAM,CAACG,QAAQ,CAAE,CAC1BvB,IAAI,CAACc,IAAI,CAAC,uCAAuC,CAAC,CACpD,CACF,CAAC,CAAC,CACJ,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,WAAW,wBACxB,WAAI,SAAS,CAAC,KAAK,0BAAkB,cACrC,MAAC,KAAK,EAAC,SAAS,CAAC,4CAA4C,wBAC3D,cAAO,SAAS,CAAC,yBAAyB,uBACxC,mCACE,6BAAc,cACd,WAAI,SAAS,CAAC,aAAa,qBAAa,GACrC,EACC,CACPZ,aAAa,CAACsB,GAAG,CAAC,SAACC,YAAY,qBAC9B,oCACE,YAAI,SAAS,CAAC,MAAM,wBAClB,oBAAKA,YAAY,CAACC,KAAK,EAAM,cAC7B,WAAI,SAAS,CAAC,aAAa,uBACzB,KAAC,MAAM,EACL,OAAO,CAAC,QAAQ,CAChB,OAAO,CAAE,yBAAMd,aAAY,CAACa,YAAY,CAACE,GAAG,CAAC,EAAC,CAC9C,SAAS,CAAC,KAAK,oBAGR,EACN,GACF,EACC,EACT,CAAC,GACI,GACJ,CAEV,CAAC,CAED,cAAe1B,cAAa"},"metadata":{},"sourceType":"module"}